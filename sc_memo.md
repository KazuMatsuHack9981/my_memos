# SC勉強用メモ

<br/>
<br/>

## 1. 情報セキュリティ及びITの基礎

### (1.1) 情報セキュリティの概念

ISMS：情報セキュリティマネジメントシステム。  
UPS(無停電電源装置)：電源障害からハードウェアを守る措置。  
情報セキュリティとは
* 安全性
* 機密性
* 可用性  
さらに、
* 真正性
* 責任追跡性
* 信頼性
* 否認防止

セキュリティの種類
* 物理的セキュリティ
* 論理的セキュリティ
	- システム的セキュリティ
	- 管理的セキュリティ
	- 人的セキュリティ


### (1.2) 情報セキュリティの特性と基本的な考え方

最小権限の原則：プロセス等の権限を最小限にする  
責務の分離の原則：作業を分担する  
フェールセーフ：障害が起きたとしても安全な方向に向かうような設計  
フェールソフト：システムに異常が発生した時でもすぐに停止せず機能を縮退する  
フォールトトレーランス：信頼性に大きく影響するものは複数備える  
フールプルーフ：不特定多数の人が操作しても誤動作がおきないようにする

CIAについて  

*	C:機密性  
	アクセス制限や認証などで権限がある人のみが使えるようにする。
*	I:安全性  
	改ざん等がされていなく、データが正常である。
*	A:可用性  
	CPUが遅い、すぐに起動しないなどが無いよう有能にする。

情報セキュリティの特性について  
*	真正性  
	認証等によって使ってる人があってるかどうかを保証する
*	責任追跡性  
	ログなどにより行動を追跡可能にする
*	否認防止性  
	タイムスタンプやディジタル署名によりあとから嘘つけないようにする
*	信頼性  
	保守点検などによりバグなどが無いようにする

情報セキュリティ対策について  
*	抑止・抑制  
	社内ネットワーク監視やセキュリティポリシ策定により主に社内の人に対して不正しないようモラルの面で気をつける
*	予防・防止  
	パッチ適用などシステム面で脆弱性がないものを作る
*	検知・追跡  
	ログ分析やウィルススキャンなどでウイルスが入っても検知して追跡可能にする
*	回復  
	バックアップ等で回復可能にする


### (1.3) 情報セキュリティマネジメントの基礎

ISMSに関する国際規格  
ISO/IEC 27000ファミリー：ISO/IEC 27000~27007, TR27008, 27010, 27011  
ISMS適合性評価制度(ISMS認証制度)：上の規格文書群に基づいた認証制度  
MSS：EMSやQMSなどを包括したマネジメントシステム規格。この中にISO/IEC 27000の半分ぐらいは包含されてる。  

ISO/IEC 27000ファミリー
* 27001：情報セキュリティマネジメントシステム要求事項
* 27002：情報セキュリティ管理作の実践のための規格

ISMS適合性評価制度の審査の流れ
* 認証前審査
	- 予備審査(任意)
	- 文書審査(組織図や情報セキュリティポリシなどを確認)
	- 実地審査(実際にそれ通りに行われてるか審査員が見に来る)
* 認証
* 認証後審査
	- 継続審査(サーベイランス、前回の審査での課題を克服してるか半年~1年に一回審査)
	- 更新審査(３年に１度認証前審査と同じようにチェック)


### (1.4) TCP/IPの主なプロトコルとネットワーク技術の基礎

OSI参照モデル
* アプリケーション層
* プレゼンテーション層
* セッション層
* トランスポート層
* ネットワーク層
* データリンク層
* 物理層

TCP/IPモデル
* アプリケーション層
* トランスポート層
* インターネット層
* ネットワークインターフェース層

IPv4ヘッダ
* バージョン番号
* ヘッダ長
* TTL
* プロトコル番号
* 発信元/宛先IPアドレス
* オプション

プロトコル番号
* 1 : ICMP
* 4 : IPv4
* 6 : TCP
* 17: UDP
* 41: IPv6

IPv4アドレス
* ループバックアドレス：127.0.0.0/8
* "This"ネットワークアドレス：0.0.0.0/8
* マルチキャストアドレス：224.0.0.0/4
* リンクローカルアドレス：169:254:0.0/16
* プライベートアドレス：10.0.0.0/8, 172.16.0.0/12, 192.168.0.0./16
* テストネットワーク用アドレス：192.0.2.0/24, 198.51.100/24, 203.0.113.0/24

IPv6ヘッダ
* バージョン
* 優先度
* ホップリミット
* ペイロード長
* 発信元/宛先IPアドレス

IPv6特徴
* IPv4が32bitに対して、IPv6は128bitもある
* IPsec標準機能よりセキュリティ強い
* DHCP不要でホストをネットワークに追加できる
* ヘッダ構造が簡単なのでルーターの負荷軽減
* NAT不要になる(膨大だから全部グローバル。NAT使うとVPNとかでアドレス変換できないから重複する危険性がある)

IPv6アドレスの記法
* 16進数で表現
* 16bitごとに8ブロックに分け、":"で区切って表現
* 1ブロック → 0000
* 省略：0000のブロックは"0"と表記できる
* 省略：0のブロックが連続してるなら"::"とできる

TCPヘッダ
* 送信元/宛先ポート番号
* シーケンス番号
* 確認応答番号
* ウィンドウサイズ
* コードビット
* チェックサム

TCPコードビット
* URG：Urgent
* ACK：Acknowledgement
* PSH：Push。すぐに上位アプリケーションに引き渡す必要があるもの
* RST：Reset。TCP強制終了、接続否定
* SYN：Synchronize
* FIN：Finish。通信終了時にお互いが送信

フロー制御(ウィンドウ制御)  
> TCPでは受信側からの応答を待たずに複数ブロックをまとめて送信し、  
> 確認応答のあった分だけウィンドウをずらすことにより時間短縮してる。  
> ウィンドウサイズ：一度にまとめて送れるデータサイズ

UDPヘッダ
* 送信元/宛先ポート番号
* パケット長
* チェックサム

ICMP  
> 制御メッセージやエラーメッセージなどを送るネットワーク層のプロトコル。  
> [ICMPのタイプとコードの表](https://www.infraexpert.com/info/5.0adsl.htm)  
> pingはエコー要求のタイプ8を送る。

電子メールの仕組み  
※図がわかりやすいのでそれも参照(p40)  
* MUA(Mail User Agent)：メール発信/受信
* MSA(Mail Submission Agent)：メール投稿受け付け/ユーザ認証
* MTA(Mail Transfer Agent)：メール中継
* MDA(Mail Delivery Agent)：メールBoxへの格納
* MRA(Mail Retrieval Agent)：メールBoxから取り出す

メールプロトコル
* POP3/IMAP4：MRAがメールBOXからMUAに渡す時だけ利用
* SMTP：MRA以外では全部SMTP

メールヘッダ  
※p43の表を参照

リゾルバ  
正引き/逆引きを行うプログラムや関数
*	スタブリゾルバ  
	一般的なPCのOSに搭載されてる機能。フルサービスリゾルバに要求を出す。
*	フルサービスリゾルバ  
	以下のDNSサーバーの一種

DNSサーバー
*	コンテンツサーバ(権威DNSサーバ、ゾーンサーバ、コンテンツサーバ、権威サーバ)  
	ルートとかjpとかのサーバで、自身の管理するドメイン(ゾーン)だけの名前解決要求に応じる。
*	キャッシュサーバ(フルサービスリゾルバ)  
	権威サーバやリゾルバと再帰的にやり取りする。一度やり取りした相手はキャッシュに入れる。  
	オープンリゾルバ：誰からの問い合わせに対しても応じる。脆弱。
	
リソースレコード  
DNSサーバに登録しておく情報のこと。
* Aレコード：ホスト名に対するIPv4
* AAAAレコード：ホスト名に対するIPv6
* CNAMEレコード：ホスト名の別名
* MXレコード：メールサーバのホスト名
* NSレコード：DNSサーバのホスト名
* PTRレコード：ホスト名の別名逆引き

DNSラウンドロビン
> 一つのドメイン名に複数IPアドレスを割り当てて負荷分散。  
> ロードバランサ等がいらずサーバの設定のみで簡単に導入できる。  
> 障害が発生してるサーバにリクエストを振り分けてしまったりという問題もある。

ダイナミックDNS(DDNS)
> ISPからIPアドレスを付与されるなどで動的にIPアドレスが変わる  
> PCでも、それに対応したDNS情報を自動で更新する仕組みを持つDNS。

HTTPステータス
* 200：OK
* 301：Moved Permanently
* 302：Moved Temporarily
* 307：Temporarily Redirect
* 401：Unauthorized
* 403：Forbidden
* 404：Not Found
* 500：Internal Server Error
* 503：Service Unavailable

HTTPヘッダ情報
* リクエスト
	- Authorization：認証方式や認証情報
	- Referer：リンク元のURL情報
	- User-Agent：ブラウザ情報
	- Cookie：提示するCookie
	- X-Forwarded-For：負荷分散装置等を経由する場合の、実際の送信元IP
* レスポンス
	- Server：サーバのプログラム名やバージョン情報
	- Set-Cookie：クライアントにセットするCookie
	- Location：リダイレクト用URI
* 両方
	- content-Type：送信する内容の型

CGI
> Webサーバのプログラムがリクエストのパラメタを受けて起動する方法

パラメタの渡し方
*	GET  
	URL末尾にクエリストリングをつけて送信。字数制限がある。  
	URLから、アクセスログから、Refererログから情報が漏洩する可能性。
*	POST  
	メッセージ本文に格納するため制限がない。秘匿性は高い。  
	バイナリもOKで基本的にログにも残らない。

URLエンコード
* スペース：+
* (ASCII<=31 & ASCII>=128)：%16進数

に変換する。

Referer
> これをログに記録することにより、自分のサイトにどういうルートで来てるのか  
> 確認することができる。クエリストリングも記録されるため情報漏洩の可能性あり。

Cookieの特性
* 1Cookie=4096バイトまで
* 1ブラウザ=300Cookieまで
* 1Webサーバ20個までのCookieをセット可能

Cookieの属性
* expires：有効期限。デフォルトだとブラウザ閉じたら消える。
* domain：有効ドメイン。.netとかはできない。これにより複数サーバでの利用ができる。デフォルトではできない。
* path：有効なディレクトリ。デフォルトは/になる。
* secure：HTTPSのみで有効
* HttpOnly：HTTP/HTTPSのみで有効

セッションID受け渡し方法
* Cookie
* hiddenフィールド
* クエリストリング

スイッチとブリッジの違い
* スイッチはASICという集積回路で実現してるので早い、ブリッジはソフトウェア
* ポート密度(一台あたりのポート数)がスイッチの方が遥かに多い
* フレーム転送方式がブリッジは信頼性の高いけど遅いストアアンドフォワード方式しかない
* スイッチだけにある機能
	- フロー機能：ポート状態を確認してから転送
	- オートネゴシエーション機能：通信モード(全二重, 半二重)や信頼度を自動的に最適化する
	- LANを論理的に小さなグループに分けて制御することが可能なので無用なトラフィックを防げる

フレーム転送方式
* ストアアンドフォワード方式：フレームを読み込み、CRCチェックをしたあとに転送
* カットアンドスルー方式：先頭6バイト(送信先MACアドレス)だけみてチェック無しで送る
* フラグメントフリー方式：先頭64バイト読んで、Runtフレーム(転送で壊れたフレーム)を取り除いて送る

VLAN
> ブロードキャストドメイン(MACアドレスで直接通信可能な範囲)の中で、スイッチの設定等  
> を変えることにより一つのLANに全く別のネットワークを作れる。ブロードキャストも届かなくなる。  
> VLAN間とのやりとりはルータやレイヤ３スイッチが必要。

VLAN構成法
*	ポートベースVLAN  
	スイッチのポート単位でどのVLANに属するかを決める。単純だが変更に手間がかかるし、  
	そのポートにつなぎさえすればVLANに参加できるという脆弱性もある。
*	アドレスベースVLAN  
	接続するホストのIPやMACによってVLANグループを設定する。IPを使用する場合は  
	レイヤ３スイッチが必要だが、柔軟にネットワーク構成ができる。
*	ポリシベースVLAN  
	ユーザがVLAN構築ポリシを決める。  
	- プロトコルベースVLAN
	- サブネットベースVLAN
*	タグVLAN  
	CISCOとかが用いてるのはこれ。パケット内の拡張タグ(ヘッダ)に情報付加して  
	VLANを構築。複数スイッチにまたがったVLANを構築できる。  
	トランクポート：複数のVLANに所属してるポート

L3スイッチ  
> ルータだけだとルータに負荷が集中してスループットが下がるという問題があった。  
> ここで、スイッチにルータの機能を加えることで(これがL3スイッチ)負荷分散をし、  
> ルータがソフトウェアを用いてるのに対し、L3スイッチはASCIのハードなので早い。
















