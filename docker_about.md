# About Docker



# コンテナ型仮想化とは

* ゲストOSの起動をせずに、ゲストOS対応のアプリを起動できる。  
* アプリケーションの起動に必要なライブラリ等を含めたコンテナ(仮想マシンみたいな)をコンテナエンジン(仮想化ソフト)上で動作する。  
* 「コンテナ」＝OS内に作る、独立したアプリの実行環境




# コンテナ型仮想化のメリット

* ハイパーバイザ型、ホストOS型に比べ、軽量  
* DevOps(チーム作業的な)に最適




# コンテナ型仮想化のデメリット

* コンテナ環境で異なるOSの作業はできない  
* カーネルを他のコンテナと共有

	
	

# コンテナの動作に特化したITインフラ
以下はコンテナの動作環境を提供するサービス

* Google Cloud Platform (Container Engine)  
* AWS の Amazon Elastic Container Service (Amazon ECS)


	
	
# Kubernetesとは
異なるホスト間でコンテナをやり取りするときに用いる。
オーケストレーションツールである。
	
	
	
	
	
# Infrastructure as Code (IaC) とは

* コードによるインフラ管理  
	+ 今までは例えばアパッチならapt install httpdしてhttpd.confなど  
	+ をいじらないといけなかったが、それら設定内容などをコード化して、  
	+ インフラ設定のコピー等が簡単にできるようになったもの。  
* メリット
	+ コード化されたファイルを共有することで、どこでも誰でも同じ環境が作れる。
* 類義語
	+ 「プロビジョニング」  
	+ 「オーケストレーション」


	

# 開発の流れ

1. コード化したDockerfileなどを構成管理  
2. CIツールでビルド(Dockerイメージの作成)  
3. デプロイ(コンテナの起動)  
4. 環境のテスト  
5. 画面試験  

	
		
	
# Dockerとは

* コンテナ型仮想環境を作成/実行するプラットフォーム  
* IaCである。


	
	
# Docker用語
## Dockerイメージ
コンテナ型の仮想化じゃなければ、OSイメージをインストールする必要  
があるが、DockerではDockerイメージをインストールすることにより、  
環境構築ができる。  
  
Dockerイメージは多種多様で、  

* DebianにPHP, ApacheがセットされたWordpressのイメージ
* UbuntuにPython3, Tensorflow, jupyterが入ったtensorflowのイメージ

等が用意されている。これを使えば、散らかったインストール作業などを簡単にできる。　　
		
		
		

## Dockerのコンテナ
Dockerのイメージを元に作成される仮想環境の実行部分。  

* Dockerエンジン    
	+ アプリケーションのパッケージ化やコンテナの実行を行う。  
* Dockerハブ・レジストリ  
	+ 公開されているDockerイメージをSaaS経由で提供する
* Dockerプライベートハブ・レジストリ  
	+ ローカルで作成・保管したイメージのリポジトリ  	
* Dockerクライアント  
	+ ユーザーがコマンドをうち、Dockerデーモンと通信を行う  
* Docker Compose
	+ 複数のコンテナから成るサービスを構築/実行する手順を自動的にするシステム。  
	+ composeファイルを用意してコマンドを一回実行するだけで、ファイルから設定を  
	+ 読み込んで、すべてのコンテナサービスを起動することができる。  
		

		

## Docker Composeの使い方

1. それぞれのコンテナのDockerfileを作成する(既にあるイメージを使う場合は不要)  
2. docker-compose.ymlを作成し、それぞれ独立したコンテナの起動定義/構築定義を行う  
3. "docker-compose up"コマンドを実行して、docker-compose.ymlで定義したコンテナを開始  
4. "docker-compose build"コマンドでDockerfileの中身が実行される。  




***
	
	
	
